window.paneiro=window.paneiro||{},window.paneiro.store=function(a,b,c,d,e,f,g){var h={},i={products:{},total:0},j={},k=function(){d(".addtocart").click(function(){var a=d(this),b=a.parent().children(".product-qty"),c=parseInt(b.text());b.html(c+1);var e=a.data("pid");i.products[e]?i.products[e].qty++:i.products[e]={qty:1},i.total+=j[e].price,d(".cart-total").html(f.brMoneyFormat(i.total)),f.setCookie("paneiroCart",JSON.stringify(i),{path:"/"})}),d(".rmfromcart").click(function(){var a=d(this),b=a.parent().children(".product-qty"),c=parseInt(b.text()),e=a.data("pid");c>0&&(b.html(c-1),i.products[e]&&(i.products[e].qty--,0===i.products[e].qty&&delete i.products[e]),i.total-=j[e].price,d(".cart-total").html(f.brMoneyFormat(i.total))),f.setCookie("paneiroCart",JSON.stringify(i),{path:"/"})}),d(".finish-purchase").click(function(){i.total>0&&(a.location.href=a.location.protocol+"//"+a.location.host+"/fechar-pedido")})},l=function(){for(var a={product:[]},b=0,c=j.length;c>b;++b)a.product.push({id:j[b].id,name:j[b].title,image:j[b].img,price:f.brMoneyFormat(j[b].price)});var g=d("#product-template").html(),h=e.render(g,a);d("#product-list").html(h)};return h.init=function(){var b=f.getCookie("userToken");f.ajax({url:g.api.url+"/product",data:{userToken:b},success:function(b){"OK"===b.status?(j=b.products,l(),k()):a.location.href="/"}})},h}(window,document,void 0,$,Mustache,paneiro.commons,paneiro.config),function(a,b,c,d,e,f,g){var h=function(){var c=b.getElementById("page-footer").getBoundingClientRect().top,e=a.innerHeight;c>e?d(".cart-summary.floating").css("display",""):d(".cart-summary.floating").css("display","none")};a.onscroll=h,a.paneiro.store.init(),h()}(window,document,void 0,$,Mustache,paneiro.commons,paneiro.config);