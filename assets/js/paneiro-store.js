window.paneiro=window.paneiro||{},function(a,b,c,d,e,f,g){function h(){}var i=h.prototype,j={products:{},total:0},k=[],l=function(){d(".addtocart").click(function(){var a=d(this),b=a.parent().children(".product-qty"),c=parseInt(b.text());b.html(c+1);var e=a.data("pid");j.products[e]?j.products[e].qty++:j.products[e]={qty:1},j.total+=k[e].price,d(".cart-total").html(f.brMoneyFormat(j.total)),f.setCookie("paneiroCart",JSON.stringify(j),{path:"/"})}),d(".rmfromcart").click(function(){var a=d(this),b=a.parent().children(".product-qty"),c=parseInt(b.text()),e=a.data("pid");c>0&&(b.html(c-1),j.products[e]&&(j.products[e].qty--,0===j.products[e].qty&&delete j.products[e]),j.total-=k[e].price,d(".cart-total").html(f.brMoneyFormat(j.total))),f.setCookie("paneiroCart",JSON.stringify(j),{path:"/"})}),d(".finish-purchase").click(function(){j.total>0&&(a.location.href=a.location.protocol+"//"+a.location.host+"/fechar-pedido")})},m=function(){var a={product:[]};for(var b in k)a.product.push({id:k[b].id,name:k[b].title,image:k[b].img,price:f.brMoneyFormat(k[b].price)});var c=d("#product-template").html(),g=e.render(c,a);d("#product-list").html(g)};i.init=function(){var c=f.getCookie("userToken");""===c?(f.setCookie("login",!0,{path:"/"}),a.location.href="/"):f.ajax({url:g.api.url+"/product",data:{userToken:c},callback:function(c){if("OK"===c.status){for(var d=0,e=c.products.length;e>d;++d){var g=c.products[d].id;k[g]=c.products[d]}m(),l(),b.getElementById("page-loading-layer").style.display="none"}else f.deleteCookie("userToken",{path:"/"}),f.setCookie("login",!0,{path:"/"}),a.location.href="/"}})},a.paneiro.store=new h}(window,document,void 0,$,Mustache,jambo,paneiro.config),function(a,b,c,d,e,f,g){var h=function(){var c=b.getElementById("page-footer").getBoundingClientRect().top,e=a.innerHeight;c>e?d(".cart-summary.floating").css("display",""):d(".cart-summary.floating").css("display","none")};a.onscroll=h,a.paneiro.store.init(),h()}(window,document,void 0,$,Mustache,jambo,paneiro.config);