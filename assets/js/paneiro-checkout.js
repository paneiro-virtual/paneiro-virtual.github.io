!function(a,b,c,d,e,f){var g=!1,h=function(a){for(var b=a.target.value,c="",d=0,e=b.length;e>d&&14>d;++d)3===d||7===d?c+=".":11===d&&(c+="-"),isNaN(b.charAt(d))||(c+=b.charAt(d));a.target.value=c},i=function(a){var b=a.target.value,c="",d=0;b.length>=5&&(b=b.substr(5));for(var e=0,f=b.length;f>e&&10>e;++e)10===f?5===d&&(c+="-",++d):4===d&&(c+="-",++d),isNaN(b.charAt(e))||(c+=b.charAt(e),++d);""!==c?a.target.value="(92) "+c:a.target.value=""},j=function(a){for(var b="",c=a.charAt(0),d=!0,e=0,f=a.length;f>e;++e)isNaN(a.charAt(e))||(b+=a.charAt(e),d&&(d=d&&c===a.charAt(e)));if(a=b,d)return!1;var g,h;if(g=0,"00000000000"==a)return!1;for(e=1;9>=e;e++)g+=parseInt(a.substring(e-1,e))*(11-e);if(h=10*g%11,(10==h||11==h)&&(h=0),h!=parseInt(a.substring(9,10)))return!1;for(g=0,e=1;10>=e;e++)g+=parseInt(a.substring(e-1,e))*(12-e);return h=10*g%11,(10==h||11==h)&&(h=0),h!=parseInt(a.substring(10,11))?!1:!0},k=b.getElementById("input-cpf");k.oninput=h,k.onchange=h,k.onpaste=h,k.onkeyup=h;var l=b.getElementById("input-phone");l.oninput=i,l.onchange=i,l.onpaste=i,l.onkeyup=i,b.getElementById("modal-layer").onclick=function(b){b.target.style.display="none",g&&(a.location.href="/")},b.getElementById("modal").onclick=function(a){a.stopPropagation()},b.getElementById("modal-close").onclick=function(){b.getElementById("modal-layer").style.display="none",g&&(a.location.href="/")},b.getElementById("checkout-form").onsubmit=function(){var a=j(k.value),c=15===l.value.length||14===l.value.length,h=b.createElement("ul");if(h.className="error-list",a)d.removeClass(b.getElementById("input-cpf"),"invalid-input");else{d.addClass(b.getElementById("input-cpf"),"invalid-input");b.createElement("li");cpfListItem.innerHTML="Cpf Inválido",h.appendChild(cpfListItem)}if(c)d.removeClass(b.getElementById("input-cpf"),"invalid-phone");else{d.addClass(b.getElementById("input-phone"),"invalid-input");var i=b.createElement("li");i.innerHTML="Telefone Inválido",h.appendChild(i)}if(a&&c){var m=JSON.parse(d.getCookie("paneiroCart")),n={};n.phone=b.getElementById("input-phone").value,n.addr=b.getElementById("input-addr").value,n.products=[];for(var o in m.products)n.products.push({id:o,qty:m.products[o].qty});b.querySelector("#modal > .success").style.display="none",b.querySelector("#modal > .loading").style.display="",b.getElementById("modal-layer").style.display="",d.ajax({url:f.api.url+"/purchases",type:"POST",data:{data:JSON.stringify(n),userToken:e.userToken},callback:function(a){"OK"===a.status&&(b.querySelector("#modal > .loading").style.display="none",b.querySelector("#modal > .success").style.display="",d.deleteCookie("paneiroCart",{path:"/"}),g=!0)}})}else{var p=b.getElementById("error-messages");p.innerHTML="",p.appendChild(h),p.style.display=""}return!1},""===e.userToken?(d.setCookie("login",!0,{path:"/"}),a.location.href="/"):d.ajax({url:f.api.url+"/auth",data:{userToken:e.userToken},callback:function(c){if("OK"===c.status){var e=c.data;b.getElementById("input-cpf").value=e.cpf,b.getElementById("input-name").value=e.name,b.getElementById("input-email").value=e.email,b.getElementById("input-phone").value=e.phone,b.getElementById("input-addr").value=e.addr,b.getElementById("page-loading-layer").style.display="none"}else d.deleteCookie("userToken",{path:"/"}),d.setCookie("login",!0,{path:"/"}),a.location.href="/"}});var m=d.getCookie("paneiroCart");""===m&&(a.location.href="/loja")}(window,document,void 0,jambo,paneiro,paneiro.config);